<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="fw-bold">Invoice Manager (Quản lý Hóa đơn)</h2>
</div>

{{#if error}}
  <div class="alert alert-danger" role="alert">
    {{error}}
  </div>
{{/if}}

<div class="card shadow-sm border-0">
  <div class="card-body">
    <table class="table table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th>ID HĐ</th>
          <th>ID Booking</th>
          <th>Ngày Lập</th>
          <th>Tổng Tiền Phòng</th>
          <th>Tổng Dịch Vụ</th>
          <th>Giảm Giá</th>
          <th>TỔNG CỘNG</th>
          <th>P.Thức TT</th>
          <th>Trạng Thái</th>
        </tr>
      </thead>
      <tbody>
        {{#each invoiceList}}
          <tr>
            <td>{{this.invoice_id}}</td>
            <td>{{this.booking_id}}</td>
            <td>{{this.issue_date_short}}</td>
            <td>{{this.total_room_cost_formatted}}</td>
            <td>{{this.total_service_cost_formatted}}</td>
            <td>{{this.discount_amount}}</td>
            <td>
              <span class="fw-bold text-danger">
                {{this.final_amount_formatted}}
              </span>
            </td>
            <td>{{this.payment_method}}</td>
            <td>
              {{#if this.isPaid}}
                <span class="badge bg-success">Đã Thanh Toán</span>
              {{else if this.isUnpaid}}
                <span class="badge bg-warning text-dark">Chưa Thanh Toán</span>
              {{else}}
                <span class="badge bg-secondary">Khác</span>
              {{/if}}
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</div>

<div class="card shadow-sm border-0 mt-4">
  <div class="card-body text-end">
    <h4 class="fw-bold mb-0 text-danger">
      DEBUG TỔNG RAW:
      {{totalFinalAmountFormatted}}
    </h4>
  </div>
</div>